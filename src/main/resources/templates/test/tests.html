<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <link href="test_block.css" rel="stylesheet">
    <title>Тесты</title>
    <style>
        .test-block {
            background-color: #f3f3f3;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 300px;
        }

        .test-block h2 {
            margin-top: 0;
        }

        .test-block p {
            margin: 0;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #f2f2f2;
            padding: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .menu-buttons {
            display: flex;
            gap: 10px;
        }

        .menu-buttons button {
            padding: 10px 20px;
            border: none;
            background-color: #ccc;
            color: #333;
            font-weight: bold;
            cursor: pointer;
        }

        .menu-buttons button:hover {
            background-color: #eee;
        }

        .search-form {
            display: flex;
        }

        .search-form input[type="text"] {
            height: 30px;
            padding: 5px;
            border-radius: 5px 0 0 5px;
            border: 1px solid #ccc;
        }

        .search-form button {
            padding: 10px 20px;
            border: none;
            background-color: #ccc;
            color: #333;
            font-weight: bold;
            cursor: pointer;
        }

        a {
            text-decoration: none; /* уберет подчеркивание */
            color: inherit; /* наследует цвет ссылки */
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
            padding: 12px 16px;
            z-index: 1;
        }

        li {
            list-style-type: none;
        }

    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var dropdown = document.querySelector(".dropdown");
            var dropdownContent = document.querySelector(".dropdown-content");

            dropdown.addEventListener("click", function () {
                dropdownContent.style.display = dropdownContent.style.display === "block" ? "none" : "block";
            });

            document.addEventListener("click", function (event) {
                var targetElement = event.target; // элемент, на который был выполнен клик

                // Проверяем, является ли цель клика рабочей областью меню
                if (!dropdown.contains(targetElement)) {
                    // Если нет, скрываем меню
                    dropdownContent.style.display = "none";
                }
            });
        });
    </script>

</head>
<body>
<header>
    <div class="header">
        <div class="logo"><a href="http://localhost:8080/menu">Testing System</a></div>

        <div>
            <form class="search-form" th:action="@{/tests}">
                <input type="text" name="searchTitle" placeholder="Поиск">
                <button type="submit">Найти</button>
            </form>
        </div>

        <div class="menu-buttons">
            <div class="dropdown">

                <button>Тесты</button>
                <div class="dropdown-content">
                    <ul>
                        <li>
                            <form th:action="@{/tests}">
                                <input type="submit" value="Пройти тесты">
                            </form>
                        </li>
                        <li>
                            <form th:action="@{/statistic}">
                                <input type="submit" value="Мои результаты">
                            </form>
                        </li>
                        <li sec:authorize="hasAuthority('TEACHER_ROLE') or hasAuthority('ADMIN_ROLE')">
                            <form th:action="@{/newTest}">
                                <input type="submit" value="Создать новый тест">
                            </form>
                        </li>
                        <li sec:authorize="hasAuthority('TEACHER_ROLE') or hasAuthority('ADMIN_ROLE')">
                            <form th:action="@{/myTests}">
                                <input type="submit" value="Мои тесты">
                            </form>
                        </li>
                    </ul>
                </div>

                <button>Профиль</button>
            </div>
        </div>


        <!--        <div class="menu-buttons">-->
        <!--            <button onclick="openPopup()">Тесты</button>-->
        <!--            <button>Профиль</button>-->
        <!--        </div>-->
        <!--        <div id="popup" class="popup">-->
        <!--            <form th:action="@{/tests}">-->
        <!--                <input type="submit" value="Пройти тесты">-->
        <!--            </form>-->
        <!--            <form th:action="@{/statistic}">-->
        <!--                <input type="submit" value="Мои результаты">-->
        <!--            </form>-->
        <!--            <form th:action="@{/newTest}" sec:authorize="hasAuthority('TEACHER_ROLE') or hasAuthority('ADMIN_ROLE')">-->
        <!--                        <input type="submit" value="Создать новый тест">-->
        <!--                    </form>-->
        <!--                    <form th:action="@{/myTests}" sec:authorize="hasAuthority('TEACHER_ROLE') or hasAuthority('ADMIN_ROLE')">-->
        <!--                        <input type="submit" value="Мои тесты">-->
        <!--                    </form>-->
        <!--                </div>-->
    </div>
</header>


<h1>Список тестов</h1>
<br><br>
<div th:each="test: *{tests}">
    <div class="test-block">
        <h2 th:text="${test.getTitle()}"></h2>
        <p th:text="'Категория: ' + ${test.getCategory().value}"></p>
        <p th:text="'Количество вопросов: ' + ${test.getCountOfQuestions}"></p>
        <br>
        <form th:action="@{/tests/{id}(id=${test.getId()})}">
            <input type="submit" value="Пройти">
        </form>
    </div>
    <br><br>
</div>
</body>
</html>